create list-based distribution by a2p customer
OBM API
POST to http://vm-obm-tst.dc/uaa/oauth/token | curl -v -X POST 'http://vm-obm-tst.dc/uaa/oauth/token' -H 'Authorization: Basic d2ViYXBwOndlYmFwcA==' -H 'Accept: */*' -H 'Content-Type: application/x-www-form-urlencoded; charset=ISO-8859-1' ; Params: grant_type = password; username = [your user name]; password = [your user password] | Status code 200
get access_token from previous step |  | access_token is present in responce
POST to http://vm-obm-tst.dc/entity/api/xm-entities | curl -v -X POST 'http://vm-obm-tst.dc/entity/api/xm-entities' -H 'Accept: */*' -H 'Content-Type: application/json; charset=UTF-8' -d '{ "typeKey": "DISTRIBUTION.LIST-BASED", "name": "[your distribution name]", "startDate": null, "updateDate": null, "endDate": null, "data": { "sender": { "name": "[your sender name]" }, "message": { "content": "[your distribution description]" }, "transportFlow": "SIMPLE", "transport": [ "SMS" ], "rateLimit": { "interval": "SECOND", "value": 1 }, "deliveryReportEnabled": true, "blackListEnabled": true, "notify": { "modes": { "beforeStart": null } }, "senderRef": "7965", "receiversCount": 1 }, "removed": false }' | Status code 201
check body from previous step |  | typeKey = DISTRIBUTION.LIST-BASED; stateKey = DRAFT; name = [your distribution name]; data.message.content = [your distribution description]
POST to http://vm-obm-tst.dc/entity/api/attachment | curl -v -X POST 'http://vm-obm-tst.dc/entity/api/attachments' -H 'Accept: */*' -H 'Content-Type: application/json; charset=UTF-8' -d '{ "typeKey": "RECEIVERS", "name": "RECIPIENTS-DATA", "contentUrl": "RECIPIENTS-DATA.zip", "startDate": "2019-08-20T06:00:00.000Z", "endDate": null, "valueContentType": "application/zip", "content": { "value": "[your receivers archive string]" }, "xmEntity": { "id": [your distribution id], "typeKey": "DISTRIBUTION.LIST-BASED", "removed": false } }' | Status code 201
check body from previous step |  | typeKey = RECEIVERS; contanet.id = [your distribution id]; contant.value = [your receivers archive string]

create list-based distribution by a2p manager
OBM API
POST to http://vm-obm-tst.dc/uaa/oauth/token | curl -v -X POST 'http://vm-obm-tst.dc/uaa/oauth/token' -H 'Authorization: Basic d2ViYXBwOndlYmFwcA==' -H 'Accept: */*' -H 'Content-Type: application/x-www-form-urlencoded; charset=ISO-8859-1' ; Params: grant_type = password; username = [your user name]; password = [your user password] | Status code 200
get access_token from previous step |  | access_token is present in responce
POST to http://vm-obm-tst.dc/entity/api/xm-entities | curl -v -X POST 'http://vm-obm-tst.dc/entity/api/xm-entities' -H 'Accept: */*' -H 'Content-Type: application/json; charset=UTF-8' -d '{ "typeKey": "DISTRIBUTION.LIST-BASED", "name": "[your distribution name]", "startDate": null, "updateDate": null, "endDate": null, "data": { "sender": { "name": "[your sender name]" }, "message": { "content": "[your distribution description]" }, "transportFlow": "SIMPLE", "transport": [ "SMS" ], "rateLimit": { "interval": "SECOND", "value": 1 }, "deliveryReportEnabled": true, "blackListEnabled": true, "notify": { "modes": { "beforeStart": null } }, "senderRef": "7965", "receiversCount": 1 }, "removed": false }' | Status code 201
check body from previous step |  | typeKey = DISTRIBUTION.LIST-BASED; stateKey = DRAFT; name = [your distribution name]; data.message.content = [your distribution description]
POST to http://vm-obm-tst.dc/entity/api/attachment | curl -v -X POST 'http://vm-obm-tst.dc/entity/api/attachments' -H 'Accept: */*' -H 'Content-Type: application/json; charset=UTF-8' -d '{ "typeKey": "RECEIVERS", "name": "RECIPIENTS-DATA", "contentUrl": "RECIPIENTS-DATA.zip", "startDate": "2019-08-20T06:00:00.000Z", "endDate": null, "valueContentType": "application/zip", "content": { "value": "[your receivers archive string]" }, "xmEntity": { "id": [your distribution id], "typeKey": "DISTRIBUTION.LIST-BASED", "removed": false } }' | Status code 201
check body from previous step |  | typeKey = RECEIVERS; contanet.id = [your distribution id]; contant.value = [your receivers archive string]

create list-based distribution by super admin
OBM API
POST to http://vm-obm-tst.dc/uaa/oauth/token | curl -v -X POST 'http://vm-obm-tst.dc/uaa/oauth/token' -H 'Authorization: Basic d2ViYXBwOndlYmFwcA==' -H 'Accept: */*' -H 'Content-Type: application/x-www-form-urlencoded; charset=ISO-8859-1' ; Params: grant_type = password; username = [your user name]; password = [your user password] | Status code 200
get access_token from previous step |  | access_token is present in responce
POST to http://vm-obm-tst.dc/entity/api/xm-entities | curl -v -X POST 'http://vm-obm-tst.dc/entity/api/xm-entities' -H 'Accept: */*' -H 'Content-Type: application/json; charset=UTF-8' -d '{ "typeKey": "DISTRIBUTION.LIST-BASED", "name": "[your distribution name]", "startDate": null, "updateDate": null, "endDate": null, "data": { "sender": { "name": "[your sender name]" }, "message": { "content": "[your distribution description]" }, "transportFlow": "SIMPLE", "transport": [ "SMS" ], "rateLimit": { "interval": "SECOND", "value": 1 }, "deliveryReportEnabled": true, "blackListEnabled": true, "notify": { "modes": { "beforeStart": null } }, "senderRef": "7965", "receiversCount": 1 }, "removed": false }' | Status code 201
check body from previous step |  | typeKey = DISTRIBUTION.LIST-BASED; stateKey = DRAFT; name = [your distribution name]; data.message.content = [your distribution description]
POST to http://vm-obm-tst.dc/entity/api/attachment | curl -v -X POST 'http://vm-obm-tst.dc/entity/api/attachments' -H 'Accept: */*' -H 'Content-Type: application/json; charset=UTF-8' -d '{ "typeKey": "RECEIVERS", "name": "RECIPIENTS-DATA", "contentUrl": "RECIPIENTS-DATA.zip", "startDate": "2019-08-20T06:00:00.000Z", "endDate": null, "valueContentType": "application/zip", "content": { "value": "[your receivers archive string]" }, "xmEntity": { "id": [your distribution id], "typeKey": "DISTRIBUTION.LIST-BASED", "removed": false } }' | Status code 201
check body from previous step |  | typeKey = RECEIVERS; contanet.id = [your distribution id]; contant.value = [your receivers archive string]
